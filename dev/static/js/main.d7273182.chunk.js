(this["webpackJsonpcodenames-fe"]=this["webpackJsonpcodenames-fe"]||[]).push([[0],{21:function(e,t,a){e.exports=a(36)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),l=a.n(r),c=(a(26),a(6)),m=a(8),s=a(9),i=a(10),u=a(11),d=a(4),b=a(1),h=a(19),p=(a(27),a(28),{border:"2px black solid",borderRadius:"10px",cursor:"pointer"}),v=function(e){var t={},a=!!e.isDoubleAgent&&"doubleAgent";if(e.isRevealed){var n={red:"#CD3B49",blue:"#80C2FF",null:"#FCECD7",doubleAgent:"black"}[a||e.team];t.backgroundColor=n,Object.assign(t,["#80C2FF","#FCECD7"].includes(n)?{}:{color:"white"})}return Object.assign({},p,t)},g=function(e){var t=e.classValue,a=e.handleSelectWord,n=e.word;return o.a.createElement("div",{onClick:function(e){return e.preventDefault()||a()},className:"".concat(t," game-card card-hover"),style:v(n)},o.a.createElement("p",null,n.value))},f={margin:"1rem"},E={red:"Red",blue:"Blue"},y=function(e){return{red:"#CD3B49",blue:"#80C2FF"}[e.toLowerCase()]},N=function(e){var t=e.activeTeam,a=e.team;return{border:"2px solid ".concat(y(a)),borderRadius:"20px",height:"138px",color:t===a&&"white",background:t===a&&y(a),fontWeight:t===a&&"bold"}},C=function(e){var t,a=e.activeTeam,n=e.classValue,r=e.score,l=e.total,c=e.team,m=e.players,s=e.spymaster;return o.a.createElement("div",{className:n,style:Object.assign({},f,t||{})},o.a.createElement("div",{style:N({activeTeam:a,team:c})},o.a.createElement("p",null,"Score"),o.a.createElement("p",null,"".concat(r," / ").concat(l))),o.a.createElement("p",{style:{color:y(c)}},E[c]),o.a.createElement("div",null,o.a.createElement("p",{style:{color:y(c)}},"Players"),m.map((function(e,t){return o.a.createElement("p",{key:t},e)}))),o.a.createElement("p",{style:{color:y(c)}},"Spymaster"),o.a.createElement("p",null,s))},R=(a(29),{percentRemaining:0,total:0,minutes:0,seconds:0}),w=function(e,t){var a=e-Date.now(),n=e-t;return{percentRemaining:100*(Date.now()-t)/n,total:a,minutes:parseInt(a/6e4),seconds:parseInt(a/1e3)}},T=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).start=function(){n.frameId=requestAnimationFrame(n.tick)},n.tick=function(){var e=w(n.props.expiresAt,n.props.startedAt);e.total<=0?(n.stop(),n.setState({timeLeft:R})):n.setState({timeLeft:e},(function(){return setTimeout((function(){n.frameId=requestAnimationFrame(n.tick)}),1e3/12)}))},n.stop=function(){cancelAnimationFrame(n.frameId)},n.state={timeLeft:w(e.expiresAt,e.startedAt)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.start()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){return o.a.createElement("div",{className:"".concat(this.props.classValue," timer-component")},o.a.createElement("i",{className:"icon ion-icon ion-android-stopwatch"}),o.a.createElement("div",{className:"progress-bar-content"},o.a.createElement("div",{style:{textAlign:"left"}},function(e){var t=e.minutes,a=e.seconds;return"".concat(t,":").concat(("0"+a%60).slice(-2))}(this.state.timeLeft)),o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(this.state.timeLeft.percentRemaining,"%")},"aria-valuenow":this.state.timeLeft.percentRemaining,"aria-valuemin":"0","aria-valuemax":"100"}))))}}]),a}(o.a.Component),S=(a(30),function(e){return{red:"#CD3B49",blue:"#80C2FF"}[e]}),k={red:"Red",blue:"Blue"},D=function(e){var t,a=e.activeTeam,n=e.handleSelectWord,r=e.redTeamScore,l=e.redTeamTotalCards,c=e.blueTeamScore,m=e.blueTeamTotalCards,s=e.words;return o.a.createElement("div",null,o.a.createElement("h1",null,"C O D E N A M E S"),o.a.createElement("h2",{style:(t=a,{color:S(t)})},k[a],"'s Turn"),o.a.createElement("div",{className:"timer-wrapper"},o.a.createElement(T,{classValue:"timer-container",startedAt:Date.now(),expiresAt:Date.now()+12e4})),o.a.createElement("div",{className:"wrapper"},o.a.createElement(C,{activeTeam:a,classValue:"left-sidebar",score:r,total:l,team:"red",players:["shoyu","scallion","nori"],spymaster:"chasu"}),o.a.createElement("div",{className:"gameboard"},[0,1,2,3,4].map((function(e){return o.a.createElement("div",{key:e,className:"card-row"},s.slice(0+5*e,5+5*e).map((function(e){return o.a.createElement(g,{key:e.id,word:e,handleSelectWord:function(){return n(e,a)},classValue:"card"})})))}))),o.a.createElement(C,{activeTeam:a,classValue:"right-sidebar",score:c,total:m,team:"blue",players:["shoyu","scallion","nori"],spymaster:"chasu"})))},A=function(e){var t=e.state,a=e.handleNewRoom,n=e.handleJoinRoom,r=e.handleNewGame,l=e.handleTeamSelection,c=e.handleGameAction,m=e.handleSelectWord;return o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:function(){return a()}},"Sign Into Room"),o.a.createElement("button",{onClick:function(){return n()}},"Join Room"),o.a.createElement("button",{onClick:function(){return r()}},"New Game"),o.a.createElement("button",{onClick:function(){return l("red")}},"I am red!"),o.a.createElement("button",{onClick:function(){return l("blue")}},"I am blue!"),o.a.createElement("button",{onClick:function(){return c(2)}},"Take action!"),o.a.createElement("div",null,"Player: ",JSON.stringify({userId:t.userId,username:t.username,roomId:t.roomId,roomName:t.roomName,team:t.team,role:t.role})),o.a.createElement("div",null,"Game has ",t.state),t.losingTeam&&o.a.createElement("div",null,t.losingTeam," lost!"),t.msg&&o.a.createElement("div",null,"Error: ",t.msg),o.a.createElement(D,{activeTeam:t.activeTeam,redTeamScore:t.redTeamScore,redTeamTotalCards:t.redTeamTotalCards,blueTeamScore:t.blueTeamScore,blueTeamTotalCards:t.blueTeamTotalCards,handleSelectWord:m,words:t.words}))},I=a(5),O=function(e){var t=e.roomId,a=e.roomName,r=e.handleCreateRoom,l=Object(n.useState)(a),c=Object(I.a)(l,2),m=c[0],s=c[1];return t?o.a.createElement(b.a,{to:"share-room"}):o.a.createElement("div",{className:"create-room-page container container-slim"},o.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"roomname"},"Room name"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"roomname","aria-describedby":"roomnameHelp",placeholder:"zeekybookydook",value:m,onChange:function(e){return s(e.target.value)}}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("div",{className:"btn btn-primary disabled"},"Random"))),o.a.createElement("small",{id:"roomnameHelp",className:"form-text text-muted"},"minimum of 6 characters")),o.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(m?"":"disabled"),onClick:function(){return m&&r(m)}},"Create a Room")))},j=function(e){return"".concat(new URL(window.location.href).origin,"/join-room?roomId=").concat(e)},x=function(e){var t=e.roomId,a=(e.roomName,Object(n.useRef)(null)),r=Object(n.useState)(""),l=Object(I.a)(r,2),c=l[0],m=l[1];return o.a.createElement("div",{className:"share-room-page container container-slim"},o.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),o.a.createElement("div",null,"Your room is ready!"),o.a.createElement("div",{className:"input-group mt-4"},o.a.createElement("input",{ref:a,type:"text",className:"form-control",id:"roomShare","aria-describedby":"roomShareHelp",value:j(t),onChange:function(e){return e.preventDefault()}}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("div",{className:"btn btn-primary",onClick:function(e){return function(e,t,a){t.current.select(),document.execCommand("copy"),e.target.focus(),a("Link Copied! ")}(e,a,m)}},"Copy"))),o.a.createElement("small",{id:"roomShareHelp",className:"form-text text-muted"},c+"Share the link with your friends!"),o.a.createElement(d.b,{to:"/join-room?roomId=".concat(t)},o.a.createElement("button",{type:"button",className:"btn btn-secondary mt-4"},"Open Room")))},F=function(e){e.userId,e.username;var t=e.roomId,a=(e.roomName,e.handleJoinRoom),r=new URLSearchParams(Object(b.g)().search).get("roomId")||"",l=Object(n.useState)(r),c=Object(I.a)(l,2),m=c[0],s=c[1];return o.a.createElement("div",{className:"join-room-page container container-slim"},o.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()||a(m)}},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"room-id"},"Room ID"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"room-id","aria-describedby":"roomJoinHelp",placeholder:"90210",value:m,disabled:t&&t===m,onChange:function(e){return s(e.target.value)},required:!0,autoComplete:"nope"})),o.a.createElement("small",{id:"roomJoinHelp",className:"form-text text-muted"},"Type in the Room ID")),o.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(m?"":"disabled"),onClick:function(){return m&&a(m)}},"Join Room #",m)))},J=function(e){return{red:"#CD3B49",blue:"#80C2FF",null:"#FCECD7",doubleAgent:"black"}[e]},_=function(e){var t=e.userId,a=e.username,r=e.roomId,l=(e.roomName,e.team),c=e.role,m=e.handleUpdatePlayer,s=Object(n.useState)(a||""),i=Object(I.a)(s,2),u=i[0],d=i[1],h=Object(n.useState)(l||""),p=Object(I.a)(h,2),v=p[0],g=p[1],f=Object(n.useState)(c||""),E=Object(I.a)(f,2),y=E[0],N=E[1];return t&&a&&r&&l&&c?o.a.createElement(b.a,{to:"/game"}):o.a.createElement("div",{className:"setup-player-page container container-slim"},o.a.createElement("h1",null,"C O D E N A M E S"),o.a.createElement("div",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"},"Nickname"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Captain Falcon",value:u,onChange:function(e){return d(e.target.value)},required:!0,autoComplete:"nope"})),o.a.createElement("small",{id:"usernameHelp",className:"form-text text-muted"},"Up to 12 characters")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"team"},"Team"),o.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0}},o.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"red"===v?J("red"):null,backgroundColor:"red"===v?J("red"):null},onClick:function(){return g("red")}},"Red"),o.a.createElement("span",{style:{width:5}}),o.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"blue"===v?J("blue"):null,backgroundColor:"blue"===v?J("blue"):null},onClick:function(){return g("blue")}},"Blue")),o.a.createElement("small",{id:"teamHelp",className:"form-text text-muted"},"You can change it later")),v&&o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"role"},"Role"),o.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0}},o.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"spymaster"===y?J(v):null,backgroundColor:"spymaster"===y?J(v):null},onClick:function(){return N("spymaster")}},"Spymaster"),o.a.createElement("span",{style:{width:5}}),o.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"player"===y?J(v):null,backgroundColor:"player"===y?J(v):null},onClick:function(){return N("player")}},"Player")),o.a.createElement("small",{id:"roleHelp",className:"form-text text-muted"},"You can change it later")),!u&&v&&y&&o.a.createElement("div",{className:"mt-5"},"Don't forget your name!"),u&&v&&y&&o.a.createElement("button",{type:"button",className:"btn btn-secondary btn-block mt-5",onClick:function(){return m({username:u,team:v,role:y})}},"Join Game")))},G={host:"host",activeTeam:"blue",state:"started",losingTeam:null,blueTeamTotalCards:8,redTeamTotalCards:7,blueTeamScore:0,redTeamScore:0,words:[{value:"camp",id:1,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"deer",id:2,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"proposal",id:3,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"walk",id:4,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"dip",id:5,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"screw",id:6,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"denial",id:7,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"rich",id:8,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"know",id:9,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"sheet",id:10,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"lose",id:11,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"charm",id:12,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"pan",id:13,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"researcher",id:14,team:null,isDoubleAgent:!0,isRevealed:!1},{value:"tight",id:15,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"adoption",id:16,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"volcano",id:17,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"result",id:18,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"crack",id:19,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"lemon",id:20,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"domestic",id:21,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"aware",id:22,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"garbage",id:23,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"lover",id:24,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"organize",id:25,team:null,isDoubleAgent:!1,isRevealed:!1}]};window.inspect=function(e){return console.log(e),e};var L=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state=Object.assign({userId:null,username:"",roomId:null,roomName:"",team:null,role:null,words:[],state:null,losingTeam:null,activeTeam:"red",redTeamScore:0,redTeamTotalCards:0,blueTeamScore:0,blueTeamTotalCards:0},G),e.toast=function(t){e.setState({msg:t}),setTimeout((function(){e.setState((function(e){return e.msg===t?Object(c.a)({},e,{msg:null}):t}))}),2e3)},e._handleClick=function(){e.state.channel.push("new_msg",{body:"I was clicked!"})},e.handleNewRoom=function(){e.state.channel.push("create_room")},e.handleJoinRoom=function(t){return e.setState({roomId:t,roomName:"testing room name"})},e.handleNewGame=function(){return e.setState(Object(c.a)({},G))},e.handleTeamSelection=function(t){return e.setState({team:t})},e.handleGameAction=function(t){return e.clientSideGameAction(t)},e.clientSideGameAction=function(t){e.setState((function(e){if("over"===e.state)return e;var a=e.words.find((function(e){return e.id===t})),n=e.state;if(a.isRevealed)return e;a.isDoubleAgent&&(setTimeout((function(){return window.alert("".concat(o," Loses!"))}),500),n="over");var o=e.activeTeam,r=o;a.team&&a.team!==o&&(console.log("### You picked the other team's card!",o,a),r="red"===o?"blue":"red");var l=Object(c.a)({},e,{activeTeam:r,words:e.words.map((function(e){return Object(c.a)({},e,{isRevealed:e.isRevealed||e.id===t})}))});return window.inspect(Object(c.a)({},l,{redTeamScore:l.words.reduce((function(e,t){return t.isRevealed&&"red"===t.team?e+1:e}),0),blueTeamScore:l.words.reduce((function(e,t){return t.isRevealed&&"blue"===t.team?e+1:e}),0),state:n,activeTeam:r}))}))},e.handleSelectWord=function(t){t.isRevealed||e.handleGameAction(t.id)},e.handleUpdatePlayer=function(t){var a=t.userId,n=void 0===a?901:a,o=t.username,r=t.team,l=t.role;return console.log("handleUpdatePlayer",{username:o,team:r,role:l}),e.setState({userId:n,username:o,team:r,role:l})},e.handleCreateRoom=function(t){console.log("handleCreateRoom",t),setTimeout((function(){console.log("mocking async room creation","RANDOM",t),e.setState({roomId:"RANDOM",roomName:t})}),200)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new h.Socket("//localhost:4000/socket",{params:{userToken:"123"}});t.connect();var a=t.channel("room:lobby");a.on("new_msg",(function(e){console.log("[".concat(Date(),"] ").concat(JSON.stringify(e.body)))})),a.on("player_message",(function(t){t.error?(console.error("[".concat(Date(),"] ").concat(t.error)),e.toast(t.error)):console.log("[".concat(Date(),"] ").concat(JSON.stringify(t)))})),a.on("player_state_update",(function(t){console.log("[".concat(Date(),"] ").concat(JSON.stringify(t.body)));var a=t.body,n=a.team,o=a.room_id,r=a.user_id;e.setState({userId:r,roomId:o,team:n})})),a.on("game_update",(function(t){console.log("[".concat(Date(),"] GAME UPDATE"));var a=t.body,n=a.active_team,o=a.words,r=a.state,l=a.losing_team,c=a.blue_total,m=a.red_total,s=a.blue_score,i=a.red_score;e.setState({words:o,activeTeam:n,redTeamTotalCards:m,blueTeamTotalCards:c,redTeamScore:i,blueTeamScore:s,losingTeam:l,state:r})})),a.join().receive("ok",(function(e){var t=e.messages;return console.log("catching up",t)})).receive("error",(function(e){var t=e.reason;return console.log("failed join",t)})).receive("timeout",(function(){return console.log("Networking issue. Still waiting...")})),this.setState({channel:a,socket:t}),window.channel=a,window.socket=t}},{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(b.d,null,o.a.createElement(b.b,{exact:!0,path:"/"},o.a.createElement("div",{className:"container center"},o.a.createElement("h1",null,"C O D E N A M E S"),o.a.createElement(d.b,{to:"/create-room"},o.a.createElement("button",{className:"btn btn-secondary"},"Create a Room")),o.a.createElement("span",{style:{padding:5}}),o.a.createElement(d.b,{to:"/game"},o.a.createElement("button",{className:"btn btn-secondary"},"Enter a Room")))),o.a.createElement(b.b,{path:"/create-room"},o.a.createElement(O,{roomId:this.state.roomId,roomName:this.state.roomName,handleCreateRoom:this.handleCreateRoom})),o.a.createElement(b.b,{path:"/share-room"},o.a.createElement(x,{roomId:this.state.roomId,roomName:this.state.roomName})),o.a.createElement(b.b,{path:"/join-room"},this.state.roomId?o.a.createElement(b.a,{to:"/setup-player"}):o.a.createElement(F,{userId:this.state.userId,username:this.state.username,roomId:this.state.roomId,roomName:this.state.roomName,handleJoinRoom:this.handleJoinRoom})),o.a.createElement(b.b,{path:"/setup-player"},this.state.roomId?o.a.createElement(_,{userId:this.state.userId,username:this.state.username,roomId:this.state.roomId,roomName:this.state.roomName,team:this.state.team,role:this.state.role,handleUpdatePlayer:this.handleUpdatePlayer}):o.a.createElement(b.a,{to:"/join-room"})),o.a.createElement(b.b,{path:"/game"},o.a.createElement(A,{state:this.state,handleNewRoom:this.handleNewRoom,handleJoinRoom:this.handleJoinRoom,handleNewGame:this.handleNewGame,handleTeamSelection:this.handleTeamSelection,handleGameAction:this.handleGameAction,handleSelectWord:this.handleSelectWord})),o.a.createElement(b.b,null,o.a.createElement("div",null,"dont come here"),o.a.createElement(d.b,{to:"/create-room"},"create-room"),o.a.createElement(d.b,{to:"/game"},"game"))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.d7273182.chunk.js.map