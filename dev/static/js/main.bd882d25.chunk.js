(this["webpackJsonpcodenames-fe"]=this["webpackJsonpcodenames-fe"]||[]).push([[0],{21:function(e){e.exports=JSON.parse('{"name":"codenames-fe","version":"0.1.0","private":true,"homepage":"/codenames-fe/dev","dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","phoenix":"1.2.1","react":"^16.13.1","react-dom":"^16.13.1","react-modal":"^3.11.2","react-router-dom":"^5.2.0","react-scripts":"3.4.1"},"scripts":{"pack":"react-scripts build && cp -r build/ dev/","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},22:function(e,t,a){e.exports=a(37)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),c=(a(27),a(6)),s=a(8),m=a(9),i=a(10),u=a(11),d=a(3),b=a(1),p=a(19),v=(a(28),a(29),{border:"2px black solid",borderRadius:"10px",cursor:"pointer"}),h=function(e){var t={},a=!!e.isDoubleAgent&&"doubleAgent";if(e.isRevealed){var n={red:"#CD3B49",blue:"#80C2FF",null:"#FCECD7",doubleAgent:"black"}[a||e.team];t.backgroundColor=n,Object.assign(t,["#80C2FF","#FCECD7"].includes(n)?{}:{color:"white"})}return Object.assign({},v,t)},g=function(e){var t=e.classValue,a=e.handleSelectWord,n=e.word;return r.a.createElement("div",{onClick:function(e){return e.preventDefault()||a()},className:"".concat(t," game-card card-hover"),style:h(n)},r.a.createElement("p",null,n.value))},f={margin:"1rem"},E={red:"Red",blue:"Blue"},y=function(e){return{red:"#CD3B49",blue:"#80C2FF"}[e.toLowerCase()]},N=function(e){var t=e.activeTeam,a=e.team;return{border:"2px solid ".concat(y(a)),borderRadius:"20px",height:"138px",color:t===a&&"white",background:t===a&&y(a),fontWeight:t===a&&"bold"}},C=function(e){var t,a=e.activeTeam,n=e.classValue,o=e.score,l=e.total,c=e.team,s=e.players,m=e.spymaster;return r.a.createElement("div",{className:n,style:Object.assign({},f,t||{})},r.a.createElement("div",{style:N({activeTeam:a,team:c})},r.a.createElement("p",null,"Score"),r.a.createElement("p",null,"".concat(o," / ").concat(l))),r.a.createElement("p",{style:{color:y(c)}},E[c]),r.a.createElement("div",null,r.a.createElement("p",{style:{color:y(c)}},"Players"),s.map((function(e,t){return r.a.createElement("p",{key:t},e)}))),r.a.createElement("p",{style:{color:y(c)}},"Spymaster"),r.a.createElement("p",null,m))},R=(a(30),{percentRemaining:0,total:0,minutes:0,seconds:0}),w=function(e,t){var a=e-Date.now(),n=e-t;return{percentRemaining:100*(Date.now()-t)/n,total:a,minutes:parseInt(a/6e4),seconds:parseInt(a/1e3)}},S=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).start=function(){n.frameId=requestAnimationFrame(n.tick)},n.tick=function(){var e=w(n.props.expiresAt,n.props.startedAt);e.total<=0?(n.stop(),n.setState({timeLeft:R})):n.setState({timeLeft:e},(function(){return setTimeout((function(){n.frameId=requestAnimationFrame(n.tick)}),1e3/12)}))},n.stop=function(){cancelAnimationFrame(n.frameId)},n.state={timeLeft:w(e.expiresAt,e.startedAt)},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.start()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(this.props.classValue," timer-component")},r.a.createElement("i",{className:"icon ion-icon ion-android-stopwatch"}),r.a.createElement("div",{className:"progress-bar-content"},r.a.createElement("div",{style:{textAlign:"left"}},function(e){var t=e.minutes,a=e.seconds;return"".concat(t,":").concat(("0"+a%60).slice(-2))}(this.state.timeLeft)),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(this.state.timeLeft.percentRemaining,"%")},"aria-valuenow":this.state.timeLeft.percentRemaining,"aria-valuemin":"0","aria-valuemax":"100"}))))}}]),a}(r.a.Component),T=(a(31),function(e){return{red:"#CD3B49",blue:"#80C2FF"}[e]}),k={red:"Red",blue:"Blue"},D=function(e){var t,a=e.activeTeam,n=e.handleSelectWord,o=e.redTeamScore,l=e.redTeamTotalCards,c=e.blueTeamScore,s=e.blueTeamTotalCards,m=e.words;return r.a.createElement("div",null,r.a.createElement("h1",null,"C O D E N A M E S"),r.a.createElement("h2",{style:(t=a,{color:T(t)})},k[a],"'s Turn"),r.a.createElement("div",{className:"timer-wrapper"},r.a.createElement(S,{classValue:"timer-container",startedAt:Date.now(),expiresAt:Date.now()+12e4})),r.a.createElement("div",{className:"wrapper"},r.a.createElement(C,{activeTeam:a,classValue:"left-sidebar",score:o,total:l,team:"red",players:["shoyu","scallion","nori"],spymaster:"chasu"}),r.a.createElement("div",{className:"gameboard"},[0,1,2,3,4].map((function(e){return r.a.createElement("div",{key:e,className:"card-row"},m.slice(0+5*e,5+5*e).map((function(e){return r.a.createElement(g,{key:e.id,word:e,handleSelectWord:function(){return n(e,a)},classValue:"card"})})))}))),r.a.createElement(C,{activeTeam:a,classValue:"right-sidebar",score:c,total:s,team:"blue",players:["shoyu","scallion","nori"],spymaster:"chasu"})))},A=function(e){var t=e.state,a=e.handleNewRoom,n=e.handleJoinRoom,o=e.handleNewGame,l=e.handleTeamSelection,c=e.handleGameAction,s=e.handleSelectWord;return r.a.createElement("div",{className:"App"},r.a.createElement("button",{onClick:function(){return a()}},"Sign Into Room"),r.a.createElement("button",{onClick:function(){return n()}},"Join Room"),r.a.createElement("button",{onClick:function(){return o()}},"New Game"),r.a.createElement("button",{onClick:function(){return l("red")}},"I am red!"),r.a.createElement("button",{onClick:function(){return l("blue")}},"I am blue!"),r.a.createElement("button",{onClick:function(){return c(2)}},"Take action!"),r.a.createElement("div",null,"Player: ",JSON.stringify({userId:t.userId,username:t.username,roomId:t.roomId,roomName:t.roomName,team:t.team,role:t.role})),r.a.createElement("div",null,"Game has ",t.state),t.losingTeam&&r.a.createElement("div",null,t.losingTeam," lost!"),t.msg&&r.a.createElement("div",null,"Error: ",t.msg),r.a.createElement(D,{activeTeam:t.activeTeam,redTeamScore:t.redTeamScore,redTeamTotalCards:t.redTeamTotalCards,blueTeamScore:t.blueTeamScore,blueTeamTotalCards:t.blueTeamTotalCards,handleSelectWord:s,words:t.words}))},I=a(5),O=function(e){var t=e.roomId,a=e.roomName,o=e.handleCreateRoom,l=Object(n.useState)(a),c=Object(I.a)(l,2),s=c[0],m=c[1];return t?r.a.createElement(b.a,{to:"share-room"}):r.a.createElement("div",{className:"create-room-page container container-slim"},r.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"roomname"},"Room name"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"roomname","aria-describedby":"roomnameHelp",placeholder:"zeekybookydook",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"btn btn-primary disabled"},"Random"))),r.a.createElement("small",{id:"roomnameHelp",className:"form-text text-muted"},"minimum of 6 characters")),r.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(s?"":"disabled"),onClick:function(){return s&&o(s)}},"Create a Room")))},j=function(e){return"".concat(new URL(window.location.href).origin,"/join-room?roomId=").concat(e)},x=function(e){var t=e.roomId,a=(e.roomName,Object(n.useRef)(null)),o=Object(n.useState)(""),l=Object(I.a)(o,2),c=l[0],s=l[1];return r.a.createElement("div",{className:"share-room-page container container-slim"},r.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),r.a.createElement("div",null,"Your room is ready!"),r.a.createElement("div",{className:"input-group mt-4"},r.a.createElement("input",{ref:a,type:"text",className:"form-control",id:"roomShare","aria-describedby":"roomShareHelp",value:j(t),onChange:function(e){return e.preventDefault()}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"btn btn-primary",onClick:function(e){return function(e,t,a){t.current.select(),document.execCommand("copy"),e.target.focus(),a("Link Copied! ")}(e,a,s)}},"Copy"))),r.a.createElement("small",{id:"roomShareHelp",className:"form-text text-muted"},c+"Share the link with your friends!"),r.a.createElement(d.b,{to:"/join-room?roomId=".concat(t)},r.a.createElement("button",{type:"button",className:"btn btn-secondary mt-4"},"Open Room")))},F=function(e){e.userId,e.username;var t=e.roomId,a=(e.roomName,e.handleJoinRoom),o=new URLSearchParams(Object(b.g)().search).get("roomId")||"",l=Object(n.useState)(o),c=Object(I.a)(l,2),s=c[0],m=c[1];return r.a.createElement("div",{className:"join-room-page container container-slim"},r.a.createElement("h1",{className:"center mb-5"},"C O D E N A M E S"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()||a(s)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"room-id"},"Room ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"room-id","aria-describedby":"roomJoinHelp",placeholder:"90210",value:s,disabled:t&&t===s,onChange:function(e){return m(e.target.value)},required:!0,autoComplete:"nope"})),r.a.createElement("small",{id:"roomJoinHelp",className:"form-text text-muted"},"Type in the Room ID")),r.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(s?"":"disabled"),onClick:function(){return s&&a(s)}},"Join Room #",s)))},J=function(e){return{red:"#CD3B49",blue:"#80C2FF",null:"#FCECD7",doubleAgent:"black"}[e]},_=function(e){var t=e.userId,a=e.username,o=e.roomId,l=(e.roomName,e.team),c=e.role,s=e.handleUpdatePlayer,m=Object(n.useState)(a||""),i=Object(I.a)(m,2),u=i[0],d=i[1],p=Object(n.useState)(l||""),v=Object(I.a)(p,2),h=v[0],g=v[1],f=Object(n.useState)(c||""),E=Object(I.a)(f,2),y=E[0],N=E[1];return t&&a&&o&&l&&c?r.a.createElement(b.a,{to:"/game"}):r.a.createElement("div",{className:"setup-player-page container container-slim"},r.a.createElement("h1",null,"C O D E N A M E S"),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Nickname"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Captain Falcon",value:u,onChange:function(e){return d(e.target.value)},required:!0,autoComplete:"nope"})),r.a.createElement("small",{id:"usernameHelp",className:"form-text text-muted"},"Up to 12 characters")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"team"},"Team"),r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0}},r.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"red"===h?J("red"):null,backgroundColor:"red"===h?J("red"):null},onClick:function(){return g("red")}},"Red"),r.a.createElement("span",{style:{width:5}}),r.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"blue"===h?J("blue"):null,backgroundColor:"blue"===h?J("blue"):null},onClick:function(){return g("blue")}},"Blue")),r.a.createElement("small",{id:"teamHelp",className:"form-text text-muted"},"You can change it later")),h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"role"},"Role"),r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0}},r.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"spymaster"===y?J(h):null,backgroundColor:"spymaster"===y?J(h):null},onClick:function(){return N("spymaster")}},"Spymaster"),r.a.createElement("span",{style:{width:5}}),r.a.createElement("button",{className:"btn btn-secondary col",style:{height:50,borderColor:"player"===y?J(h):null,backgroundColor:"player"===y?J(h):null},onClick:function(){return N("player")}},"Player")),r.a.createElement("small",{id:"roleHelp",className:"form-text text-muted"},"You can change it later")),!u&&h&&y&&r.a.createElement("div",{className:"mt-5"},"Don't forget your name!"),u&&h&&y&&r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-block mt-5",onClick:function(){return s({username:u,team:h,role:y})}},"Join Game")))},G={host:"host",activeTeam:"blue",state:"started",losingTeam:null,blueTeamTotalCards:8,redTeamTotalCards:7,blueTeamScore:0,redTeamScore:0,words:[{value:"camp",id:1,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"deer",id:2,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"proposal",id:3,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"walk",id:4,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"dip",id:5,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"screw",id:6,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"denial",id:7,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"rich",id:8,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"know",id:9,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"sheet",id:10,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"lose",id:11,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"charm",id:12,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"pan",id:13,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"researcher",id:14,team:null,isDoubleAgent:!0,isRevealed:!1},{value:"tight",id:15,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"adoption",id:16,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"volcano",id:17,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"result",id:18,team:"blue",isDoubleAgent:!1,isRevealed:!1},{value:"crack",id:19,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"lemon",id:20,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"domestic",id:21,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"aware",id:22,team:null,isDoubleAgent:!1,isRevealed:!1},{value:"garbage",id:23,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"lover",id:24,team:"red",isDoubleAgent:!1,isRevealed:!1},{value:"organize",id:25,team:null,isDoubleAgent:!1,isRevealed:!1}]},L=a(21);window.inspect=function(e){return console.log(e),e};var M=L.homepage,W=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Object.assign({userId:null,username:"",roomId:null,roomName:"",team:null,role:null,words:[],state:null,losingTeam:null,activeTeam:"red",redTeamScore:0,redTeamTotalCards:0,blueTeamScore:0,blueTeamTotalCards:0},G),e.toast=function(t){e.setState({msg:t}),setTimeout((function(){e.setState((function(e){return e.msg===t?Object(c.a)({},e,{msg:null}):t}))}),2e3)},e._handleClick=function(){e.state.channel.push("new_msg",{body:"I was clicked!"})},e.handleNewRoom=function(){e.state.channel.push("create_room")},e.handleJoinRoom=function(t){return e.setState({roomId:t,roomName:"testing room name"})},e.handleNewGame=function(){return e.setState(Object(c.a)({},G))},e.handleTeamSelection=function(t){return e.setState({team:t})},e.handleGameAction=function(t){return e.clientSideGameAction(t)},e.clientSideGameAction=function(t){e.setState((function(e){if("over"===e.state)return e;var a=e.words.find((function(e){return e.id===t})),n=e.state;if(a.isRevealed)return e;a.isDoubleAgent&&(setTimeout((function(){return window.alert("".concat(r," Loses!"))}),500),n="over");var r=e.activeTeam,o=r;a.team&&a.team!==r&&(console.log("### You picked the other team's card!",r,a),o="red"===r?"blue":"red");var l=Object(c.a)({},e,{activeTeam:o,words:e.words.map((function(e){return Object(c.a)({},e,{isRevealed:e.isRevealed||e.id===t})}))});return window.inspect(Object(c.a)({},l,{redTeamScore:l.words.reduce((function(e,t){return t.isRevealed&&"red"===t.team?e+1:e}),0),blueTeamScore:l.words.reduce((function(e,t){return t.isRevealed&&"blue"===t.team?e+1:e}),0),state:n,activeTeam:o}))}))},e.handleSelectWord=function(t){t.isRevealed||e.handleGameAction(t.id)},e.handleUpdatePlayer=function(t){var a=t.userId,n=void 0===a?901:a,r=t.username,o=t.team,l=t.role;return console.log("handleUpdatePlayer",{username:r,team:o,role:l}),e.setState({userId:n,username:r,team:o,role:l})},e.handleCreateRoom=function(t){console.log("handleCreateRoom",t),setTimeout((function(){console.log("mocking async room creation","RANDOM",t),e.setState({roomId:"RANDOM",roomName:t})}),200)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new p.Socket("//localhost:4000/socket",{params:{userToken:"123"}});t.connect();var a=t.channel("room:lobby");a.on("new_msg",(function(e){console.log("[".concat(Date(),"] ").concat(JSON.stringify(e.body)))})),a.on("player_message",(function(t){t.error?(console.error("[".concat(Date(),"] ").concat(t.error)),e.toast(t.error)):console.log("[".concat(Date(),"] ").concat(JSON.stringify(t)))})),a.on("player_state_update",(function(t){console.log("[".concat(Date(),"] ").concat(JSON.stringify(t.body)));var a=t.body,n=a.team,r=a.room_id,o=a.user_id;e.setState({userId:o,roomId:r,team:n})})),a.on("game_update",(function(t){console.log("[".concat(Date(),"] GAME UPDATE"));var a=t.body,n=a.active_team,r=a.words,o=a.state,l=a.losing_team,c=a.blue_total,s=a.red_total,m=a.blue_score,i=a.red_score;e.setState({words:r,activeTeam:n,redTeamTotalCards:s,blueTeamTotalCards:c,redTeamScore:i,blueTeamScore:m,losingTeam:l,state:o})})),a.join().receive("ok",(function(e){var t=e.messages;return console.log("catching up",t)})).receive("error",(function(e){var t=e.reason;return console.log("failed join",t)})).receive("timeout",(function(){return console.log("Networking issue. Still waiting...")})),this.setState({channel:a,socket:t}),window.channel=a,window.socket=t}},{key:"render",value:function(){return r.a.createElement(d.a,{basename:M},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/"},r.a.createElement("div",{className:"container center"},r.a.createElement("h1",null,"C O D E N A M E S"),r.a.createElement(d.b,{to:"/create-room"},r.a.createElement("button",{className:"btn btn-secondary"},"Create a Room")),r.a.createElement("span",{style:{padding:5}}),r.a.createElement(d.b,{to:"/game"},r.a.createElement("button",{className:"btn btn-secondary"},"Enter a Room")))),r.a.createElement(b.b,{path:"/create-room"},r.a.createElement(O,{roomId:this.state.roomId,roomName:this.state.roomName,handleCreateRoom:this.handleCreateRoom})),r.a.createElement(b.b,{path:"/share-room"},r.a.createElement(x,{roomId:this.state.roomId,roomName:this.state.roomName})),r.a.createElement(b.b,{path:"/join-room"},this.state.roomId?r.a.createElement(b.a,{to:"/setup-player"}):r.a.createElement(F,{userId:this.state.userId,username:this.state.username,roomId:this.state.roomId,roomName:this.state.roomName,handleJoinRoom:this.handleJoinRoom})),r.a.createElement(b.b,{path:"/setup-player"},this.state.roomId?r.a.createElement(_,{userId:this.state.userId,username:this.state.username,roomId:this.state.roomId,roomName:this.state.roomName,team:this.state.team,role:this.state.role,handleUpdatePlayer:this.handleUpdatePlayer}):r.a.createElement(b.a,{to:"/join-room"})),r.a.createElement(b.b,{path:"/game"},r.a.createElement(A,{state:this.state,handleNewRoom:this.handleNewRoom,handleJoinRoom:this.handleJoinRoom,handleNewGame:this.handleNewGame,handleTeamSelection:this.handleTeamSelection,handleGameAction:this.handleGameAction,handleSelectWord:this.handleSelectWord})),r.a.createElement(b.b,null,r.a.createElement("div",null,"dont come here"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.b,{to:"/"},"Landing")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/create-room"},"create-room")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/game"},"game"))))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.bd882d25.chunk.js.map